<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Introducing Waffle support for Jest (experimental)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Introducing Waffle support for Jest (experimental)</h1>
</header>
<section data-field="subtitle" class="p-summary">
Adding experimental support for Jest.
</section>
<section data-field="body" class="e-content">
<section name="4089" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="7064" id="7064" class="graf graf--figure graf--leading"><img class="graf-image" data-image-id="1*fS06HBYQWm5dTJeofv9cZg.png" data-width="1000" data-height="550" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*fS06HBYQWm5dTJeofv9cZg.png"></figure><h3 name="0444" id="0444" class="graf graf--h3 graf-after--figure graf--title">Introducing Waffle support for Jest (experimental)</h3><h3 name="1730" id="1730" class="graf graf--h3 graf-after--h3">Waffle is on fire 🔥🔥🔥</h3><p name="0826" id="0826" class="graf graf--p graf-after--h3">In the short three months since the release of version 3, the number of projects using Waffle has doubled!</p><figure name="0ba9" id="0ba9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*GuXbavmvR7eeN4LgQSRcPA.png" data-width="1984" data-height="748" src="https://cdn-images-1.medium.com/max/800/1*GuXbavmvR7eeN4LgQSRcPA.png"></figure><h3 name="b8dd" id="b8dd" class="graf graf--h3 graf-after--figure">Welcoming external contributors 🤝</h3><p name="85c5" id="85c5" class="graf graf--p graf-after--h3">We are happy to see more and more people contributing to Waffle. And today we introduce the first major feature fully created by an external contributor.</p><p name="343b" id="343b" class="graf graf--p graf-after--p">Thanks to the <a href="https://github.com/EthWorks/Waffle/pull/321" data-href="https://github.com/EthWorks/Waffle/pull/321" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">great work</a> from <a href="https://github.com/adrianmcli" data-href="https://github.com/adrianmcli" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Adrian Li</a> and testing by <a href="https://github.com/Mrtenz" data-href="https://github.com/Mrtenz" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Maarten Zuidhoorn</a>, we are releasing experimental support for Jest.</p><h3 name="65cb" id="65cb" class="graf graf--h3 graf-after--p">Why Jest?</h3><p name="4082" id="4082" class="graf graf--p graf-after--h3">Mocha and Chai were the default choices for Waffle due to historical reasons. However, Jest has become the most popular testing framework by the number of downloads, and so, the time has come to include support for Jest in Waffle.</p><figure name="0056" id="0056" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*uwooCKntn1ykrasM" data-width="1200" data-height="630" src="https://cdn-images-1.medium.com/max/800/0*uwooCKntn1ykrasM"></figure><h3 name="c1bf" id="c1bf" class="graf graf--h3 graf-after--figure">Usage</h3><p name="9188" id="9188" class="graf graf--p graf-after--h3">To start using Jest matchers, install <code class="markup--code markup--p-code">@ethereum-waffle/jest</code> using yarn or your favourite package manager, i.e.:</p><pre name="7ed2" id="7ed2" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">yarn add @ethereum-waffle/jest</code></pre><p name="bf4a" id="bf4a" class="graf graf--p graf-after--pre">And below, there is a simple example of a test written with Waffle and Jest:</p><pre name="8aaf" id="8aaf" class="graf graf--pre graf-after--p">import { waffleJest } from ‘@ethereum-waffle/jest’;</pre><pre name="e647" id="e647" class="graf graf--pre graf-after--pre">expect.extend(waffleJest);</pre><pre name="e540" id="e540" class="graf graf--pre graf-after--pre">test(&#39;object assignment&#39;, () =&gt; {   <br>  expect(await token.balanceOf(wallet.address))<br>    .toEqBN(993);<br>});</pre><h3 name="3355" id="3355" class="graf graf--h3 graf-after--pre">Documentation 📄</h3><p name="23fb" id="23fb" class="graf graf--p graf-after--h3">Currently, there is no documentation yet, so one has to take a look at <a href="https://github.com/EthWorks/Waffle/tree/master/waffle-jest/test/matchers" data-href="https://github.com/EthWorks/Waffle/tree/master/waffle-jest/test/matchers" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">tests</a> or <a href="https://github.com/EthWorks/Waffle/tree/master/waffle-jest/test/matchers" data-href="https://github.com/EthWorks/Waffle/tree/master/waffle-jest/test/matchers" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">PR</a> for more examples. Similarly to the <em class="markup--em markup--p-em">chai</em> module, <code class="markup--code markup--p-code">@ethereum-waffle/jest</code> supports matchers related to:</p><ul class="postList"><li name="f775" id="f775" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">BigNumber</strong> (<code class="markup--code markup--li-code">toEqBN</code>, <code class="markup--code markup--li-code">toBeGtBN</code>, <code class="markup--code markup--li-code">toBeLtBN</code>, <code class="markup--code markup--li-code">toBeGteBN</code>, <code class="markup--code markup--li-code">toBeLteBN)</code> e.g.:<br><code class="markup--code markup--li-code">expect(BigNumber.from(2)).toEqBN(2)</code></li><li name="d8da" id="d8da" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Transaction revert:</strong><br><code class="markup--code markup--li-code">await expect(token.transfer(sender, &#39;0x0&#39;, 100)).toBeReverted();</code> <br><code class="markup--code markup--li-code">await expect(token.transfer(sender, &#39;0x0&#39;,100)</code> <br> <code class="markup--code markup--li-code">.toBeRevertedWith(&#39;transfer from the zero address&#39;);</code></li><li name="2c9d" id="2c9d" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Events</strong>:<br><code class="markup--code markup--li-code">await expect(tx).toHaveEmitted(contract, ‘Transfer’);<br></code> <code class="markup--code markup--li-code">await expect(tx).toHaveEmittedWith(events, ‘Transfer’,</code> <br> <code class="markup--code markup--li-code">[sender, recipient, amount);</code></li><li name="5554" id="5554" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Calling functions</strong>:<br><code class="markup--code markup--li-code">expect(‘totalSupply’).toBeCalledOnContract(token);</code> <br><code class="markup--code markup--li-code">expect(‘balanceOf’).toBeCalledOnContractWith(token, address);</code></li><li name="61d3" id="61d3" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Balance change:</strong><br><code class="markup--code markup--li-code">await expect(...).toChangeBalance(sender, ‘-200’);</code><br><code class="markup--code markup--li-code">await expect(…).toChangeBalances([sender, receiver], [‘-200’, 200]);</code></li><li name="6257" id="6257" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Hex strings:</strong><br><code class="markup--code markup--li-code">expect(‘0x28…0e’).toBeProperAddress();</code><br><code class="markup--code markup--li-code">expect(‘0x28…40’).toBeProperPrivateKey();</code><br><code class="markup--code markup--li-code">expect(‘0x702’).toBeProperHex(2)</code></li></ul><h3 name="cde1" id="cde1" class="graf graf--h3 graf-after--li">Disclaimer ✋</h3><p name="401f" id="401f" class="graf graf--p graf-after--h3">We are introducing support for Jest in Waffle 3.1 as an experimental feature, which means that:</p><ul class="postList"><li name="4041" id="4041" class="graf graf--li graf-after--p">we don’t promise to keep and maintain this feature at this point,</li><li name="a290" id="a290" class="graf graf--li graf-after--li">there might be breaking changes introduced without a major version change,</li><li name="70b0" id="70b0" class="graf graf--li graf-after--li">we didn’t test how it works with <a href="https://buidler.dev/" data-href="https://buidler.dev/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Buidler</a> and… we didn’t test much in general.</li></ul><h3 name="17fc" id="17fc" class="graf graf--h3 graf-after--li">Feedback 😍 ? 😠</h3><p name="0654" id="0654" class="graf graf--p graf-after--h3 graf--trailing">We would love to hear your feedback on Jest support. Is it working? Do you love it or hate it? Let us know in comments!</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@marekkirejczyk" class="p-author h-card">Marek Kirejczyk</a> on <a href="https://medium.com/p/331f39d630bd"><time class="dt-published" datetime="2020-09-08T12:52:42.686Z">September 8, 2020</time></a>.</p><p><a href="https://medium.com/@marekkirejczyk/introducing-waffle-support-for-jest-experimental-331f39d630bd" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 22, 2025.</p></footer></article></body></html>