<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Smart Contracts testing still sucks, how want to make it better</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Smart Contracts testing still sucks, how want to make it better</h1>
</header>
<section data-field="subtitle" class="p-summary">
Despite these challenging times, we remain very optimistic about the future of Ethereum ecosystem. Earlier this year, when ETH price‚Ä¶
</section>
<section data-field="body" class="e-content">
<section name="7edd" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="812e" id="812e" class="graf graf--h3 graf--leading graf--title">Smart Contracts testing still sucks, how we want to make it¬†better</h3></div><div class="section-inner sectionLayout--outsetColumn"><figure name="1aab" id="1aab" class="graf graf--figure graf--layoutOutsetCenter graf-after--h3"><img class="graf-image" data-image-id="1*tyr3NElqUbauWHzfKJ0c4w.jpeg" data-width="1500" data-height="1000" data-is-featured="true" src="https://cdn-images-1.medium.com/max/1200/1*tyr3NElqUbauWHzfKJ0c4w.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="bd58" id="bd58" class="graf graf--p graf-after--figure">Despite these challenging times, we remain very optimistic about the future of Ethereum ecosystem. Earlier this year, when ETH price crashed, MakerDAO challenges arose. More recently, dForce protocol and Hegic have been hacked. And yet, we perceive it as a healthy part of ecosystem growth. As it is being tested, new problems arise and they need to be solved. Yet another important step in a long journey to a wide adoption.</p><figure name="d056" id="d056" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*bdjy3mRDRmjYU_4QpV4VYg.jpeg" data-width="1500" data-height="700" src="https://cdn-images-1.medium.com/max/800/1*bdjy3mRDRmjYU_4QpV4VYg.jpeg"></figure><p name="353f" id="353f" class="graf graf--p graf-after--figure">Despite great optimism on the product‚Äôs side, we see many problems behind the curtains. One very close to our hearts relates to tooling for smart contracts development, which seems to be lagging behind. Not only is writing smart contracts still slow, error prone and somewhat cumbersome, but also we consider testing smart contracts challenging and at times even annoying.</p><figure name="ecd0" id="ecd0" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*c2U_kigxuRGKiLzrlAtzww.jpeg" data-width="1500" data-height="700" src="https://cdn-images-1.medium.com/max/800/1*c2U_kigxuRGKiLzrlAtzww.jpeg"></figure><p name="6710" id="6710" class="graf graf--p graf-after--figure">We believe that smart contracts testing should be easy and fun. Good tests encourage developers to test more, build better code and refactor more often, which is highly correlated with better security and low development costs. Still, we find progress in terms of tooling somewhat disappointing.</p><p name="317f" id="317f" class="graf graf--p graf-after--p">What we find exciting is that, though written a while ago, our tool Waffle is now getting more and more popular. We discover over and over again that yet another acknowledged project is using it.</p><figure name="a4f5" id="a4f5" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Er0apJ1lFb82yNFuOsNOVA.png" data-width="853" data-height="530" src="https://cdn-images-1.medium.com/max/800/1*Er0apJ1lFb82yNFuOsNOVA.png"></figure><p name="23b1" id="23b1" class="graf graf--p graf-after--figure">Waffle is also the default testing framework for <a href="https://buidler.dev/" data-href="https://buidler.dev/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Buidler</a>‚Ää‚Äî‚Ää<a href="https://nomiclabs.io/" data-href="https://nomiclabs.io/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Nomic Labs</a>‚Äô building tool, with its adoption growing faster and faster.</p><figure name="73a2" id="73a2" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*kZ2bRVgAQOC3K8cThYaDTw.jpeg" data-width="1500" data-height="549" src="https://cdn-images-1.medium.com/max/800/1*kZ2bRVgAQOC3K8cThYaDTw.jpeg"></figure><p name="0ddc" id="0ddc" class="graf graf--p graf-after--figure">While we see Waffle as a great start to build a better experience for smart contract developers, it doesn‚Äôt meet our high expectations on what a good tooling for writing tests should look like, yet.</p><figure name="c139" id="c139" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*bMrtypPFfUdSGe0yzUylXw.jpeg" data-width="1500" data-height="700" src="https://cdn-images-1.medium.com/max/800/1*bMrtypPFfUdSGe0yzUylXw.jpeg"></figure><p name="f831" id="f831" class="graf graf--p graf-after--figure">And so, we are very glad to announce that our initial efforts have been appreciated and we have received a grant from Ethereum foundation to work on better testing experience with Waffle.</p><h3 name="d894" id="d894" class="graf graf--h3 graf-after--p">Grant: Waffle new exciting¬†features</h3><p name="e6a6" id="e6a6" class="graf graf--p graf-after--h3">We will be working on Waffle version 3.0 and introducing exciting new features, including:</p><ul class="postList"><li name="7fb6" id="7fb6" class="graf graf--li graf-after--p">Support for mocks, so that you can create a dynamic mock quickly from javascript e.g.</li></ul><pre name="d002" id="d002" class="graf graf--pre graf-after--li">const mockContract = await deployMockContract(wallet, Contract.interface);<br>await mockContract.mock.add.returns(2);<br>await mockContract.mock.mul.withArgs(2, 2).returns(4);<br>await mockContract.mock.div.withArgs(3, 0).reverts();</pre><ul class="postList"><li name="ef3d" id="ef3d" class="graf graf--li graf-after--pre">Support for fakes and putting expectations on function calls e.g:</li></ul><pre name="05e7" id="05e7" class="graf graf--pre graf-after--li">expect(&#39;functionName&#39;).to.be.calledOnContract(contract)<br>expect(&#39;functionName&#39;).to.be.calledOnContractWith(contract, ...args)</pre><ul class="postList"><li name="35ab" id="35ab" class="graf graf--li graf-after--pre">Support for testing with ENS</li><li name="880b" id="880b" class="graf graf--li graf-after--li">Support for contract flattening</li><li name="1f3e" id="1f3e" class="graf graf--li graf-after--li">Simplify configuration files</li><li name="b11d" id="b11d" class="graf graf--li graf-after--li">Support Ethers.js version 5.x</li><li name="8b03" id="8b03" class="graf graf--li graf-after--li">And more!</li></ul><h3 name="d5bd" id="d5bd" class="graf graf--h3 graf-after--li">Other awesome¬†features</h3><p name="9549" id="9549" class="graf graf--p graf-after--h3">There are other Waffle features we were working on in the meantime and we hope they will make you as excited as we are. Two honorable mentions are:</p><ul class="postList"><li name="f52e" id="f52e" class="graf graf--li graf-after--p">Support for Vyper compilation</li><li name="4f7a" id="4f7a" class="graf graf--li graf-after--li">Show file name and line number when revert occurs, e.g.</li></div><div class="section-inner sectionLayout--outsetColumn"></ul><figure name="b533" id="b533" class="graf graf--figure graf--layoutOutsetCenter graf-after--li"><img class="graf-image" data-image-id="1*2CgoEkmAMrMS9PfDJLV72A.png" data-width="1945" data-height="380" src="https://cdn-images-1.medium.com/max/1200/1*2CgoEkmAMrMS9PfDJLV72A.png"></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="915c" id="915c" class="graf graf--h3 graf-after--figure">Acknowledgements</h3><p name="639a" id="639a" class="graf graf--p graf-after--h3">We would like to take the opportunity to thank the Nomic Labs team, who are at the frontier of Ethereum tooling. Their support made it all possible for us.</p><h3 name="872a" id="872a" class="graf graf--h3 graf-after--p">So, what‚Äôs¬†next?</h3><p name="6103" id="6103" class="graf graf--p graf-after--h3">We are working hard and will deliver the features described above. We will post updates soon. Stay tuned!</p><p name="49ac" id="49ac" class="graf graf--p graf-after--p graf--trailing">Did you like the post? üëèüëèüëè</p></div></div></section><section name="5920" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="e172" id="e172" class="graf graf--p graf--leading"><strong class="markup--strong markup--p-strong">We are </strong><a href="https://ethworks.io/" data-href="https://ethworks.io/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Ethworks</strong></a><strong class="markup--strong markup--p-strong">!</strong></p><p name="fc4c" id="fc4c" class="graf graf--p graf-after--p">Truly remarkable team for your blockchain project.</p><p name="83af" id="83af" class="graf graf--p graf-after--p graf--trailing">Find us on <a href="https://twitter.com/ethworks" data-href="https://twitter.com/ethworks" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Twitter</a> and <a href="https://dribbble.com/ethworks" data-href="https://dribbble.com/ethworks" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Dribbble</a>.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@marekkirejczyk" class="p-author h-card">Marek Kirejczyk</a> on <a href="https://medium.com/p/7c38d5ce7fc9"><time class="dt-published" datetime="2020-04-29T14:57:13.865Z">April 29, 2020</time></a>.</p><p><a href="https://medium.com/@marekkirejczyk/smart-contracts-testing-still-sucks-how-want-to-make-it-better-7c38d5ce7fc9" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 22, 2025.</p></footer></article></body></html>